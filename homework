<!DOCTYPE html>
<html>
 <style>
        table {
          font-family: Arial, Helvetica, sans-serif;
          border-collapse: collapse;
          width: 100%;
        }
         
        table td, table th {
          border: 1px solid #ddd;
          padding: 8px;
        }
        table tr:nth-child(even){background-color: #f2f2f2;}
        table tr:hover {background-color: #ddd;}
         
        table th {
          padding-top: 12px;
          padding-bottom: 12px;
          text-align: left;
          background-color: #ff7b00;
          color: white;
        }
        </style>
</head>
 
<body>
    <h1 style="text-align: center;">User Data</h1>
    <table class="output"></table>
    <label>https://docs.google.com/spreadsheets/d/e/2PACX-1vSihQ4Rsc_7DIyRRHUsb5TMEoyyKR9Q11fmYv7GSCpAl-36gQwbbxQUJjp0ppZlCyPGFjV0SDr9x2ij/pubhtml?gid=0&single=true</label>
    <script>
var getText = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSihQ4Rsc_7DIyRRHUsb5TMEoyyKR9Q11fmYv7GSCpAl-36gQwbbxQUJjp0ppZlCyPGFjV0SDr9x2ij/pubhtml?gid=0&single=true";
fetch(getText,{
  mode: "no"
})
  .then(response => response.json())
  .then(data => {
    console.log(data['title'],data) // access json.body here
  })
// async function getText(file) {
//   let myObject = await fetch(file,{mode: 'no-cors'});
//   let myText = await myObject.text();
//   console.log( myText.length)
//   // document.getElementById("demo").innerHTML = myText;
// }
// fetch(getText , {
//   mode: "no-cors",
//   method: "GET",
//   headers: {
//     "Accept": "application/json"
//   }
// })
// .then(response => response.json())
// .then((response) => {
//   console.log(response.body);
//   return dispatch({
//     type: "GET_CALL",
//     response: response.body
//   });
// })
// .catch(error => { console.log('request failed', error); });



	//		<!-- https://docs.google.com/spreadsheets/d/1U0cWRaEI5iGUAPeB-9VkU-jzGJCnMwb2FwW3kfwlSqU/edit?usp=sharing -->
// const sheetId = '1U0cWRaEI5iGUAPeB-9VkU-jzGJCnMwb2FwW3kfwlSqU';
// const base = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?`;
// const sheetName = 'user-data';	
// const query = encodeURIComponent('Select *')
// const url = `${base}&sheet=${sheetName}&tq=${query}`
// 			// const url = 'https://docs.google.com/spreadsheets/d/1U0cWRaEI5iGUAPeB-9VkU-jzGJCnMwb2FwW3kfwlSqU/gviz/tq?';
// 			fetch(base,{
// 				mode: 'no-cors'
// 			})
// 			.then((res) => {return res.json()})
// 			.then((data) =>{
// 			console.log(data);
// 			})
// 			const sheetId = '1U0cWRaEI5iGUAPeB-9VkU-jzGJCnMwb2FwW3kfwlSqU';
// const base = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?`;
// const sheetName = 'user-data';
// const query = encodeURIComponent('Select *')
// const url = `${base}&sheet=${sheetName}&tq=${query}`
//     fetch(url)
//         .then(res => res.text())
//         .then(rep => {
//             //Remove additional text and extract only JSON:
//             const jsonData = JSON.parse(rep.substring(47).slice(0, -2));
//             console.log(jsonData)
//         })
 
// const data = []
// document.addEventListener('DOMContentLoaded', init)
 
// const output = document.querySelector('.output')
 
// function init() {
//     fetch(url,{mode: 'no-cors'})
//         .then(res => res.text())
//         .then(rep => {
//             //Remove additional text and extract only JSON:
//             // const jsonData = JSON.parse(rep.substring(47).slice(0, -2));
//             console.log(rep)
 
//             // const colz = [];
//             // const tr = document.createElement('tr');
//             // //Extract column labels
//             // jsonData.table.cols.forEach((heading) => {
//             //     if (heading.label) {
//             //         let column = heading.label;
//             //         colz.push(column);
//             //         const th = document.createElement('th');
//             //         th.innerText = column;
//             //         tr.appendChild(th);
//             //     }
//             // })
//             // output.appendChild(tr);
 
//             // //extract row data:
//             // jsonData.table.rows.forEach((rowData) => {
//             //     const row = {};
//             //     colz.forEach((ele, ind) => {
//             //         row[ele] = (rowData.c[ind] != null) ? rowData.c[ind].v : '';
//             //     })
//             //     data.push(row);
//             // })
//             // processRows(data);
//         })
//         .catch("error")
// }
  
// function processRows(json) {
//     json.forEach((row) => {
 
//         const tr = document.createElement('tr');
//         const keys = Object.keys(row);
     
//         keys.forEach((key) => {
//             const td = document.createElement('td');
//             td.textContent = row[key];
//             tr.appendChild(td);
//         })
//         output.appendChild(tr);
//     })
// }
		</script>
</body>
</html>
